<!DOCTYPE html>
<html ng-app="activeUI">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title><%= title %></title>
    <link rel='stylesheet' href='../js/lib/bootstrap3.3.0/css/bootstrap.css' />
    <link rel='stylesheet' href='../css/style.css' />
    <style type="text/css">
    .amenu {
        position:absolute;
        display:none;
        margin:0;
        padding:0;
        border:1px solid #ccc;
        list-style:none;
    }
    </style>
    <script type="text/javascript" src="../js/jquery-1.11.1.js"></script>
    <script type="text/javascript" src="../js/angular.js"></script>
    <script type="text/javascript" src="../js/lib/bootstrap3.3.0/js/bootstrap.js"></script>
    <script type="text/javascript" src="../js/fabric.js/dist/fabric.js"></script>
    <!--全局 -->
    <script type="text/javascript" src="../js/activeUI/logger.js"></script>
    <script type="text/javascript" src="../js/activeUI/global.js"></script>
    <!--业务系统初始化数据 -->
    <script type="text/javascript" src="../js/activeUI/global-config.js"></script>
    <!--fabric相关,主要负责canvas画布的操作. -->
    <script type="text/javascript" src="../js/activeUI/shapes/element.class.js"></script>
    <script type="text/javascript" src="../js/activeUI/operate/canvas-init.js"></script>
    <script type="text/javascript" src="../js/activeUI/operate/eventHandle.js"></script>
    <!--angular相关,主要负责canvas之外的dom操作,以及对外提供的接口 -->
    <script type="text/javascript" src="../js/activeUI/operate/operateCtrl.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <h3><%= title %></h3>
          <div class="row">
            <div class="col-md-2 operate-container"></div>
            <div class="col-md-8" ng-controller="toolbarCtrl">
              <div class="btn-group btn-group-sm toolbar">
                <button type="button" class="btn btn-default {{tool.active}}" ng-repeat="tool in tools" ng-click="chooseTool($index)">{{tool.title}}</button>
              </div>
            </div>
          </div>
          <div class="row" >
            <div class="col-md-2 operate-container well" ng-controller="operateCtrl">
              <div class="row operate-row" ng-repeat='item in operators'>
                <div class="col-ac-12" ng-init="p_index=$index"><h5><b>{{item.heading}}</b></h5></div>
                <div class="col-ac-4" ng-repeat='obj in item.objs'>
                  <img data-pindex="{{p_index}}" data-index="{{$index}}" ng-src="{{obj.img}}" class="width-100 img-rounded" draggable="true" />
                  {{obj.title}}
                </div>
              </div>
            </div>
            <div class="col-md-8">
              <canvas id="activeCanvas"></canvas>
            </div>
            <div class="col-md-2" >
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="amenu" class="open amenu">
      <ul class="dropdown-menu">
        <li><a href="javascript:act.rc.deleteNode()">删除</a></li>
        <li><a href="javascript:reserveData();">获取数据</a></li>
      </ul>
    </div>
    <script type="text/javascript">
    function reserveData () {
      var cid = act.getActiveNode()._id;
      var data = {
        cid: cid,
        children: [{
          title: 't1',
          data: {}
        },{
          title: 't1',
          data: {}
        },{
          title: 't1',
          data: {}
        }]
      };
      var node = act.nodes.get(data.cid);
      console.log(node)
    }
    </script>
  </body>
</html>
